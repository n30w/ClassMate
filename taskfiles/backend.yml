version: "3"

tasks:
  dev:
    dir: backend/cmd/api
    cmds:
      - go run .
  test:
    dir: backend
    cmds:
      - go test -v ./backend/**
  tidy:
    dir: backend
    cmds:
      - go mod tidy

  # Docker commands

  db-up:
    dir: backend/remote
    cmds:
      - docker compose --env-file ../.env  up -d
  # db-stop stops running containers, does not delete them.
  db-stop:
    dir: backend/remote
    cmds:
      - docker compose stop
  db-down:
    dir: backend/remote
    cmds:
      - docker compose down

  # Rebuild the container(s) due to adjusted settings.
  db-build:
    dir: backend/remote
    cmds:
      - docker compose build

  # db-down-clean deletes volumes and their data! See:
  # https://docs.docker.com/compose/gettingstarted/#step-8-experiment-with-some-other-commands
  db-down-clean:
    dir: backend/remote
    cmds:
      - docker compose down --volumes
